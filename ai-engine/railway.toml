[build]
builder = "dockerfile"
dockerfilePath = "./Dockerfile"

[deploy]
startCommand = "/app/entrypoint.sh"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3
healthcheckPath = "/health"
healthcheckTimeout = 60
region = "us-west1"

# Environment variable schema for Railway UI
[env]
REDIS_HOST = { default = "redis-12049.c12.us-east-1-4.ec2.cloud.redislabs.com" }
REDIS_PORT = { default = "12049" }
REDIS_USERNAME = { default = "default" }
REDIS_PASSWORD = { default = "t9H5tKrB72iVrATk2jlcjwZRuQUgF5B5" }
LOG_LEVEL = { default = "INFO" }
MODEL_CACHE_TTL = { default = "3600" }
MAX_BATCH_SIZE = { default = "32" }
MODEL_TIMEOUT = { default = "30" }
TRAIN_ON_START = { default = "false", description = "Train models on container start" }
SKIP_MODEL_TRAINING = { default = "true", description = "Skip model training entirely - set to true for Railway deployment" }
PORT = { default = "8000", description = "Port for the API server" }