/* 1. Tailwind's core layers */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* 2. Import modular CSS files */
@import '../styles/theme.css';
@import '../styles/base.css';
@import '../styles/animations.css';
@import '../styles/components.css';
@import '../styles/navigation.css';
@import '../styles/vault.css';
@import '../styles/utilities.css';

/* ========================================
   VAULT PAGE SPECIFIC OVERRIDES
   High-priority fixes for vault detail pages
   ======================================== */

/* CRITICAL: Specific Page Layout Fixes */
.vault-page,
[class*="min-h-screen"] {
  padding-top: 3.5rem !important;
}

/* Vault Page Container Width Controls */
.vault-page .container,
.vault-page .vault-detail-header-card-optimized,
.vault-page .max-w-6xl,
.vault-page .max-w-5xl {
  max-width: 72rem !important;
  width: 100% !important;
  margin-left: auto !important;
  margin-right: auto !important;
  position: relative !important;
  transform: none !important;
}

.vault-page .container {
  padding-left: 1rem !important;
  padding-right: 1rem !important;
}

@media (min-width: 640px) {
  .vault-page .container {
    padding-left: 1.5rem !important;
    padding-right: 1.5rem !important;
  }
}

/* Vault Page Root Container Isolation */
.vault-page-container-isolated {
  width: 100vw !important;
  max-width: none !important;
  margin: 0 !important;
  padding: 0 !important;
  position: relative !important;
  overflow-x: hidden !important;
  left: 0 !important;
  right: 0 !important;
  transform: none !important;
}

/* Vault Page Spacing Controls */
.vault-page-spacing {
  padding-top: 3.5rem;
  min-height: calc(100vh - 3.5rem);
}

@media (max-width: 768px) {
  .vault-page-spacing {
    padding-top: 3.25rem;
  }
}

@media (max-width: 480px) {
  .vault-page-spacing {
    padding-top: 3rem;
  }
}

/* Vault Page Link and Tab Underline Fixes */
.vault-page a,
.vault-page Link,
.vault-page button,
.vault-page [data-radix-tabs-trigger],
.vault-page [role="tab"],
.vault-page .tab-trigger-compact,
.vault-page .tabs-trigger {
  text-decoration: none !important;
  text-decoration-line: none !important;
  text-underline-offset: initial !important;
  border-bottom: none !important;
  text-decoration-skip-ink: none !important;
  -webkit-text-decoration-line: none !important;
  box-shadow: none !important;
}

.vault-page a:hover, .vault-page a:focus, .vault-page a:active,
.vault-page Link:hover, .vault-page Link:focus, .vault-page Link:active,
.vault-page button:hover, .vault-page button:focus, .vault-page button:active,
.vault-page [data-radix-tabs-trigger]:hover, .vault-page [data-radix-tabs-trigger]:focus,
.vault-page [role="tab"]:hover, .vault-page [role="tab"]:focus,
.vault-page .tab-trigger-compact:hover, .vault-page .tab-trigger-compact:focus,
.vault-page .tabs-trigger:hover, .vault-page .tabs-trigger:focus {
  text-decoration: none !important;
  text-decoration-line: none !important;
  text-underline-offset: initial !important;
  border-bottom: none !important;
  -webkit-text-decoration-line: none !important;
  box-shadow: none !important;
}

/* Override browser default link styling */
.vault-page *[href],
.vault-page a,
.vault-page Link,
.vault-page [role="link"] {
  text-decoration: none !important;
  border-bottom: none !important;
  box-shadow: none !important;
}

/* ========================================
   NUCLEAR FIXES - VAULT PAGE LAYOUT
   Maximum specificity overrides for stubborn spacing issues
   ======================================== */

/* NUCLEAR FIX 1: Force max-w-5xl to be exactly 64rem */
.vault-page .max-w-5xl {
  max-width: 64rem !important;
}

/* NUCLEAR FIX 2: Back Button Spacing */
.vault-page .mb-4,
.vault-page .mb-4:not([style*="margin-bottom"]),
.vault-page button.mb-4,
.vault-page .Button.mb-4,
html body div.vault-page button.mb-4 {
  margin-bottom: 1rem !important;
}

/* NUCLEAR FIX 3: Header Card to Tabs Connection */
.vault-page .vault-detail-header-card-optimized,
html body div.vault-page .vault-detail-header-card-optimized {
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
  border-bottom-left-radius: 8px !important;
  border-bottom-right-radius: 8px !important;
  max-width: 64rem !important;
  width: 100% !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

/* NUCLEAR FIX 4: Tabs Container Zero Top Margin */
.vault-page .tabs-container-compact,
.vault-page [data-slot="tabs-list"],
.vault-page [data-slot="tabs"],
html body div.vault-page .tabs-container-compact,
html body div.vault-page [data-slot="tabs-list"] {
  margin-top: -2px !important;
  margin-bottom: 0.5rem !important;
  padding-top: 0 !important;
  border-top-left-radius: 8px !important;
  border-top-right-radius: 8px !important;
  max-width: 64rem !important;
  width: 100% !important;
  margin-left: auto !important;
  margin-right: auto !important;
  gap: 0 !important;
}

/* NUCLEAR FIX 5: Tabs Content Width Alignment */
.vault-page [data-slot="tabs-content"],
.vault-page [data-slot="tabs-content"] .grid,
html body div.vault-page [data-slot="tabs-content"] {
  max-width: 64rem !important;
  width: 100% !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

/* NUCLEAR FIX 6: Container Width Enforcement */
html body div.vault-page .container.mx-auto,
html body div.vault-page-container-isolated .container.mx-auto {
  max-width: 64rem !important;
  width: 100% !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

/* NUCLEAR FIX 7: Override Inline Styles */
.vault-page [style*="maxWidth"],
.vault-page [style*="max-width"] {
  max-width: 64rem !important;
}

/* NUCLEAR FIX 8: TabsList Width Override */
.vault-page [data-slot="tabs-list"] {
  width: min(100%, 60rem) !important;
  max-width: 60rem !important;
  display: grid !important;
  grid-template-columns: repeat(auto-fit, minmax(0, 1fr)) !important;
}

/* NUCLEAR FIX 9: Remove Radix UI Component Gaps */
html body div.vault-page [data-slot="tabs"] {
  gap: 0 !important;
  row-gap: 0 !important;
  column-gap: 0 !important;
}

/* NUCLEAR FIX 10: Visual Connection Pseudo-elements */
html body div.vault-page .vault-detail-header-card-optimized::after {
  content: '';
  position: absolute;
  bottom: -1px;
  left: 0;
  right: 0;
  height: 1px;
  background: rgba(255, 255, 255, 0.1);
  z-index: 1000;
}

html body div.vault-page .tabs-container-compact::before {
  content: '';
  position: absolute;
  top: -1px;
  left: 0;
  right: 0;
  height: 1px;
  background: rgba(255, 255, 255, 0.1);
  z-index: 1000;
}

/* NUCLEAR FIX 11: CSS Custom Properties for Fallback */
html body div.vault-page {
  --tabs-container-max-width: 64rem !important;
  --tabs-content-max-width: 64rem !important;
  --header-tabs-gap: 0px !important;
}

/* NUCLEAR FIX 12: Force Tab Trigger Clean Layout */
.vault-page .tab-trigger-clean {
  flex: 1 1 0 !important;
  box-sizing: border-box !important;
}

/* ========================================
   WALLET MODAL OVERRIDE STYLES
   Fixes for wallet connection modal visibility
   ======================================== */

.wallet-modal-override {
  background-color: rgba(15, 23, 42, 0.95) !important;
  backdrop-filter: blur(8px) !important;
  -webkit-backdrop-filter: blur(8px) !important;
}

.wallet-modal-override [data-radix-dialog-content] {
  background-color: rgba(30, 41, 59, 0.98) !important;
  border: 1px solid rgba(148, 163, 184, 0.3) !important;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.6) !important;
  backdrop-filter: blur(16px) !important;
  -webkit-backdrop-filter: blur(16px) !important;
}

/* Enhanced text contrast and visibility */
.wallet-modal-override h1,
.wallet-modal-override h2,
.wallet-modal-override h3,
.wallet-modal-override .text-xl {
  color: rgba(248, 250, 252, 0.95) !important;
  font-weight: 600 !important;
}

.wallet-modal-override .text-sm,
.wallet-modal-override .text-xs,
.wallet-modal-override span {
  color: rgba(203, 213, 225, 0.9) !important;
}

.wallet-modal-override .text-muted-foreground {
  color: rgba(148, 163, 184, 0.8) !important;
}

/* Card styling fixes with better contrast */
.wallet-modal-override .bg-card,
.wallet-modal-override [class*="card"] {
  background-color: rgba(51, 65, 85, 0.8) !important;
  border: 1px solid rgba(148, 163, 184, 0.2) !important;
}

.wallet-modal-override .hover\:bg-secondary\/50:hover {
  background-color: rgba(71, 85, 105, 0.6) !important;
}

/* Button styling improvements */
.wallet-modal-override button {
  border: 1px solid rgba(148, 163, 184, 0.3) !important;
  background-color: rgba(51, 65, 85, 0.9) !important;
  color: rgba(248, 250, 252, 0.95) !important;
}

.wallet-modal-override button:hover {
  background-color: rgba(71, 85, 105, 0.9) !important;
  border-color: rgba(148, 163, 184, 0.5) !important;
}

/* Status indicators with better visibility */
.wallet-modal-override .bg-green-500 {
  background-color: rgb(34, 197, 94) !important;
}

.wallet-modal-override .bg-yellow-500 {
  background-color: rgb(234, 179, 8) !important;
}

.wallet-modal-override .text-green-600 {
  color: rgb(34, 197, 94) !important;
}

/* Error styling */
.wallet-modal-override .border-destructive\/50 {
  border-color: rgba(239, 68, 68, 0.5) !important;
}

.wallet-modal-override .bg-destructive\/10 {
  background-color: rgba(239, 68, 68, 0.1) !important;
}

.wallet-modal-override .text-destructive {
  color: rgb(239, 68, 68) !important;
}

/* ========================================
   DOCUMENTATION SPECIFIC STYLES
   Sidebar and navigation for docs pages
   ======================================== */

@layer components {
  /* Documentation Sidebar */
  .docs-sidebar {
    position: sticky;
    top: 3.5rem;
    height: calc(100vh - 3.5rem);
    overflow-y: auto;
    background-color: hsl(var(--card));
    border-right: 1px solid hsl(var(--border));
    padding: 1.5rem;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--border)) transparent;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-y: contain;
  }

  .docs-sidebar::-webkit-scrollbar {
    width: 6px;
  }

  .docs-sidebar::-webkit-scrollbar-track {
    background: transparent;
  }

  .docs-sidebar::-webkit-scrollbar-thumb {
    background: hsl(var(--border));
    border-radius: 3px;
  }

  .docs-sidebar::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--border) / 0.8);
  }

  /* Active navigation item styles */
  .docs-nav-active {
    position: relative;
  }

  .docs-nav-active::before {
    content: '';
    position: absolute;
    left: -12px;
    top: 50%;
    transform: translateY(-50%);
    width: 3px;
    height: 16px;
    background: linear-gradient(to bottom, hsl(var(--primary)), hsl(var(--primary) / 0.5));
    border-radius: 2px;
  }

  /* Enhanced Responsive Strategy */
  @media (max-width: 640px) {
    .docs-sidebar {
      box-shadow: 2px 0 25px rgba(0, 0, 0, 0.2);
    }

    .docs-nav-active::before {
      left: -4px;
      width: 4px;
      height: 20px;
    }
  }

  @media (min-width: 641px) and (max-width: 768px) {
    .docs-sidebar {
      box-shadow: 2px 0 20px rgba(0, 0, 0, 0.15);
    }

    .docs-nav-active::before {
      left: -6px;
      width: 3px;
      height: 18px;
    }
  }

  @media (min-width: 769px) and (max-width: 1023px) {
    .docs-sidebar {
      box-shadow: 2px 0 15px rgba(0, 0, 0, 0.12);
    }

    .docs-nav-active::before {
      left: -8px;
      width: 3px;
      height: 16px;
    }
  }

  @media (max-width: 1023px) {
    .docs-sidebar {
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }
  }

  /* Enhanced focus styles for accessibility */
  .docs-sidebar a:focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
    border-radius: 6px;
    box-shadow: 0 0 0 4px hsl(var(--primary) / 0.1);
  }

  .docs-sidebar button:focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
    border-radius: 6px;
    box-shadow: 0 0 0 4px hsl(var(--primary) / 0.1);
  }

  /* Enhanced touch interaction styles */
  .docs-sidebar a {
    transition: all 0.2s ease-in-out;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  .docs-sidebar button {
    transition: all 0.2s ease-in-out;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  /* Touch-specific active states */
  @media (hover: none) and (pointer: coarse) {
    .docs-sidebar a:active {
      background-color: hsl(var(--muted) / 0.8);
      transform: scale(0.98);
    }

    .docs-sidebar button:active {
      background-color: hsl(var(--muted) / 0.6);
      transform: scale(0.95);
    }
  }

  /* Tablet-specific enhancements for iPad */
  @media (min-width: 768px) and (max-width: 1023px) and (hover: none) {
    .docs-sidebar a {
      padding: 0.875rem 0.75rem;
      min-height: 44px;
    }

    .docs-sidebar button {
      min-width: 44px;
      min-height: 44px;
    }
  }
}

/* Additional responsive utilities for documentation */
@layer utilities {
  /* Touch-optimized scrolling for all mobile/tablet devices */
  .touch-scroll {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }

  /* Enhanced backdrop blur for better mobile overlay */
  .mobile-backdrop {
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }

  /* Responsive text scaling for better mobile readability */
  .responsive-text {
    font-size: clamp(0.875rem, 0.8rem + 0.5vw, 1rem);
  }
}
